class som_gbx_global_container : Thinker
{
	som_gbx_global_data g;
	
	som_gbx_global_container Init()
	{
		if (!g)
		{
			g = new("som_gbx_global_data");
			g.init();
		}
		
		ChangeStatNum(STAT_STATIC);
		return (self);
	}

	static som_gbx_global_container Get()
	{
		ThinkerIterator it = ThinkerIterator.Create("som_gbx_global_container", STAT_STATIC);
		let p = som_gbx_global_container(it.Next());
		
		if (p == null)
		{
			p = new("som_gbx_global_container").Init();
		}
		
		return p;
	}
}

class som_gbx_global_data : som_gbx_object_base
{
	som_gbx_sys_core_master master;
	som_gbx_sys_core_hud hud;
	som_gbx_sys_addon_bxp bxp;
	som_gbx_sys_core_map_manager map_man;
	som_gbx_sys_core_gbug_manager gbug_man;
	som_gbx_sys_addon_respec respec;

	void init()
	{
		hud = new("som_gbx_sys_core_hud");
		hud.g = self;
		hud.init();

		master = new("som_gbx_sys_core_master");
		master.g = self;
		master.init();

		bxp = new("som_gbx_sys_addon_bxp");
		bxp.g = self;
		bxp.init();

		map_man = new("som_gbx_sys_core_map_manager");
		map_man.g = self;
		map_man.init();
		
		gbug_man = new("som_gbx_sys_core_gbug_manager");
		gbug_man.g = self;
		gbug_man.init();
		
		respec = new("som_gbx_sys_addon_respec");
		respec.g = self;
		respec.init();
	}
}
