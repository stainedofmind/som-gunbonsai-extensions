// Most systems will inherit from this
Class som_gbx_object_base : Object play {}

Class som_gbx_eventhandler : EventHandler
{
	som_gbx_global_data g;
	
	void save_globals()
	{
		Let gc = som_gbx_global_container.Get();
		
		gc.g = g;
	}
	
	void load_globals()
	{
		Let gc = som_gbx_global_container.Get();
		
		g = gc.g;
	}
	
	// Event Overrides
	override void OnRegister()
	{
		// Nada
	}
	
	override void WorldTick()
	{
		g.bxp.check_completion();
		g.bxp.process_timers();
	}
	
	override void WorldLoaded(WorldEvent e)
	{
		load_globals();
		
		g.master.map_start();
	}
	
	override void WorldUnloaded(WorldEvent e)
	{
		save_globals();
	}
	
	override void RenderOverlay(RenderEvent e)
	{
		g.hud.render();
	}
}
